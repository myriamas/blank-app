import streamlit as st
import pandas as pd

st.title("Documents réglementaires – VAX-HIV-2030")

file = st.sidebar.file_uploader("Importer Documents (CSV)", key="doc_req")

if file:
    df = pd.read_csv(file)

    phase_filter = st.sidebar.multiselect("Phase", df["Phase"].unique())
    statut_filter = st.sidebar.multiselect("Statut conformité", df["Statut conformité"].unique())

    filtered = df.copy()
    if phase_filter:
        filtered = filtered[filtered["Phase"].isin(phase_filter)]
    if statut_filter:
        filtered = filtered[filtered["Statut conformité"].isin(statut_filter)]

    def color_status(val):
        if val == "Conforme":
            return "background-color:#d4f7d4"
        if val == "Partiel":
            return "background-color:#fff3b0"
        if val == "Non conforme":
            return "background-color:#ffb3b3"
        return ""

    st.dataframe(filtered.style.applymap(color_status, subset=["Statut conformité"]))
