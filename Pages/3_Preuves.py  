import streamlit as st
import pandas as pd

st.title("Preuves réglementaires – VAX-HIV-2030")

file = st.sidebar.file_uploader("Importer Preuves (CSV)", key="proofs")

if file:
    df = pd.read_csv(file)

    type_filter = st.sidebar.multiselect("Type de preuve", df["Type"].unique())
    linked_filter = st.sidebar.text_input("Filtrer par exigence/document associé")

    filtered = df.copy()

    if type_filter:
        filtered = filtered[filtered["Type"].isin(type_filter)]

    if linked_filter:
        mask = filtered.apply(lambda row: linked_filter.lower() in row.astype(str).str.lower().to_string(), axis=1)
        filtered = filtered[mask]

    st.dataframe(filtered)
